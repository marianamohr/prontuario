import{aA as mo,aB as fo,aC as ho,r as c,aD as go,j as e,w as G,aE as X,aF as L,aG as Co,aH as xo,aI as vo,y as z,q as _,aJ as yo,aK as Y,t as D,v as E,z as M,P as bo,h as no,aL as io,E as lo,aM as jo,Q as Ro,x as O,a3 as oo,a2 as So,aN as Po,u as ko,a as wo,aO as Mo,T as F,B as Fo,aP as Bo}from"./index-DJlnvih6.js";import{P as H}from"./PageContainer-DrcGApUY.js";import{u as co,f as Io,a as Go,F as W,b as q}from"./Select-cu5oWY5i.js";import{S as zo,F as T}from"./FormControlLabel-BcClaYQT.js";import{B as eo}from"./Button-6qkZ5rwi.js";import{T as I}from"./TextField-CttgYVuf.js";import{I as $}from"./InputAdornment-KMMRGF9J.js";import{A as _o}from"./Alert-CVqmUb3o.js";const Ao=mo();function No({props:o,name:t,defaultTheme:r,themeId:s}){let n=fo(r);return s&&(n=n[s]||n),ho({theme:n,name:t,props:o})}const To=yo(),Uo=Ao("div",{name:"MuiStack",slot:"Root"});function Do(o){return No({props:o,name:"MuiStack",defaultTheme:To})}function Eo(o,t){const r=c.Children.toArray(o).filter(Boolean);return r.reduce((s,n,i)=>(s.push(n),i<r.length-1&&s.push(c.cloneElement(t,{key:`separator-${i}`})),s),[])}const Vo=o=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[o],$o=({ownerState:o,theme:t})=>{let r={display:"flex",flexDirection:"column",...X({theme:t},L({values:o.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(o.spacing){const s=Co(t),n=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof o.spacing=="object"&&o.spacing[u]!=null||typeof o.direction=="object"&&o.direction[u]!=null)&&(l[u]=!0),l),{}),i=L({values:o.direction,base:n}),f=L({values:o.spacing,base:n});typeof i=="object"&&Object.keys(i).forEach((l,u,m)=>{if(!i[l]){const g=u>0?i[m[u-1]]:"column";i[l]=g}}),r=xo(r,X({theme:t},f,(l,u)=>o.useFlexGap?{gap:Y(s,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Vo(u?i[u]:o.direction)}`]:Y(s,l)}}))}return r=vo(t.breakpoints,r),r};function Oo(o={}){const{createStyledComponent:t=Uo,useThemeProps:r=Do,componentName:s="MuiStack"}=o,n=()=>z({root:["root"]},l=>_(s,l),{}),i=t($o);return c.forwardRef(function(l,u){const m=r(l),h=go(m),{component:g="div",direction:v="column",spacing:y=0,divider:b,children:j,className:S,useFlexGap:p=!1,...C}=h,R={direction:v,spacing:y,useFlexGap:p},P=n();return e.jsx(i,{as:g,ownerState:R,ref:u,className:G(P.root,S),...C,children:b?Eo(j,b):j})})}function Lo(o){return _("MuiCard",o)}D("MuiCard",["root"]);const Ho=o=>{const{classes:t}=o;return z({root:["root"]},Lo,t)},Wo=M(bo,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),to=c.forwardRef(function(t,r){const s=E({props:t,name:"MuiCard"}),{className:n,raised:i=!1,...f}=s,d={...s,raised:i},l=Ho(d);return e.jsx(Wo,{className:G(l.root,n),elevation:i?8:void 0,ref:r,ownerState:d,...f})});function qo(o){return _("MuiCardContent",o)}D("MuiCardContent",["root"]);const Ko=o=>{const{classes:t}=o;return z({root:["root"]},qo,t)},Jo=M("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),ro=c.forwardRef(function(t,r){const s=E({props:t,name:"MuiCardContent"}),{className:n,component:i="div",...f}=s,d={...s,component:i},l=Ko(d);return e.jsx(Jo,{as:i,className:G(l.root,n),ownerState:d,ref:r,...f})});function Qo(o){return _("MuiFormGroup",o)}D("MuiFormGroup",["root","row","error"]);const Zo=o=>{const{classes:t,row:r,error:s}=o;return z({root:["root",r&&"row",s&&"error"]},Qo,t)},Xo=M("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:r}=o;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Yo=c.forwardRef(function(t,r){const s=E({props:t,name:"MuiFormGroup"}),{className:n,row:i=!1,...f}=s,d=co(),l=Io({props:s,muiFormControl:d,states:["error"]}),u={...s,row:i,error:l.error},m=Zo(u);return e.jsx(Xo,{className:G(m.root,n),ownerState:u,ref:r,...f})}),oe=no(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),ee=no(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),te=M("span",{name:"MuiRadioButtonIcon",shouldForwardProp:io})({position:"relative",display:"flex"}),re=M(oe,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),se=M(ee,{name:"MuiRadioButtonIcon"})(lo(({theme:o})=>({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}}]})));function uo(o){const{checked:t=!1,classes:r={},fontSize:s}=o,n={...o,checked:t};return e.jsxs(te,{className:r.root,ownerState:n,children:[e.jsx(re,{fontSize:s,className:r.background,ownerState:n}),e.jsx(se,{fontSize:s,className:r.dot,ownerState:n})]})}const po=c.createContext(void 0);function ae(){return c.useContext(po)}function ne(o){return _("MuiRadio",o)}const so=D("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ie=o=>{const{classes:t,color:r,size:s}=o,n={root:["root",`color${O(r)}`,s!=="medium"&&`size${O(s)}`]};return{...t,...z(n,ne,t)}},le=M(zo,{shouldForwardProp:o=>io(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:r}=o;return[t.root,r.size!=="medium"&&t[`size${O(r.size)}`],t[`color${O(r.color)}`]]}})(lo(({theme:o})=>({color:(o.vars||o).palette.text.secondary,[`&.${so.disabled}`]:{color:(o.vars||o).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.action.active,(o.vars||o).palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(oo()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[t].main,(o.vars||o).palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(oo()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${so.checked}`]:{color:(o.vars||o).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function ce(o,t){return typeof t=="object"&&t!==null?o===t:String(o)===String(t)}const ue=e.jsx(uo,{checked:!0}),de=e.jsx(uo,{}),U=c.forwardRef(function(t,r){const s=E({props:t,name:"MuiRadio"}),{checked:n,checkedIcon:i=ue,color:f="primary",icon:d=de,name:l,onChange:u,size:m="medium",className:h,disabled:g,disableRipple:v=!1,slots:y={},slotProps:b={},inputProps:j,...S}=s,p=co();let C=g;p&&typeof C>"u"&&(C=p.disabled),C??(C=!1);const R={...s,disabled:C,disableRipple:v,color:f,size:m},P=ie(R),k=ae();let B=n;const A=jo(u,k&&k.onChange);let w=l;k&&(typeof B>"u"&&(B=ce(k.value,s.value)),typeof w>"u"&&(w=k.name));const N=b.input??j,[a,x]=Ro("root",{ref:r,elementType:le,className:G(P.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:b,...S},getSlotProps:V=>({...V,onChange:(J,...Q)=>{var Z;(Z=V.onChange)==null||Z.call(V,J,...Q),A(J,...Q)}}),ownerState:R,additionalProps:{type:"radio",icon:c.cloneElement(d,{fontSize:d.props.fontSize??m}),checkedIcon:c.cloneElement(i,{fontSize:i.props.fontSize??m}),disabled:C,name:w,checked:B,slots:y,slotProps:{input:typeof N=="function"?N(R):N}}});return e.jsx(a,{...x,classes:P})});function pe(o){return _("MuiRadioGroup",o)}D("MuiRadioGroup",["root","row","error"]);const me=o=>{const{classes:t,row:r,error:s}=o;return z({root:["root",r&&"row",s&&"error"]},pe,t)},ao=c.forwardRef(function(t,r){const{actions:s,children:n,className:i,defaultValue:f,name:d,onChange:l,value:u,...m}=t,h=c.useRef(null),g=me(t),[v,y]=Go({controlled:u,default:f,name:"RadioGroup"});c.useImperativeHandle(s,()=>({focus:()=>{let p=h.current.querySelector("input:not(:disabled):checked");p||(p=h.current.querySelector("input:not(:disabled)")),p&&p.focus()}}),[]);const b=So(r,h),j=Po(d),S=c.useMemo(()=>({name:j,onChange(p){y(p.target.value),l&&l(p,p.target.value)},value:v}),[j,l,y,v]);return e.jsx(po.Provider,{value:S,children:e.jsx(Yo,{role:"radiogroup",ref:b,className:G(g.root,i),...m,children:n})})}),K=Oo({createStyledComponent:M("div",{name:"MuiStack",slot:"Root"}),useThemeProps:o=>E({props:o,name:"MuiStack"})});function je(){const{user:o}=ko(),t=wo(),r=(t==null?void 0:t.branding)??null,s=(t==null?void 0:t.loading)??!1,n=(t==null?void 0:t.refetch)??(async()=>{}),{settings:i,setMode:f,setPrimaryColorKey:d,setDensity:l,primaryPresets:u}=Mo(),[m,h]=c.useState(""),[g,v]=c.useState(""),[y,b]=c.useState(""),[j,S]=c.useState(""),[p,C]=c.useState(""),[R,P]=c.useState(""),[k,B]=c.useState(!1),[A,w]=c.useState("");if(c.useEffect(()=>{r&&(h(r.primary_color??""),v(r.background_color??""),b(r.home_label??""),S(r.home_image_url??""),C(r.action_button_color??""),P(r.negation_button_color??""))},[r]),(o==null?void 0:o.role)!=="PROFESSIONAL")return e.jsx(H,{children:e.jsx(F,{children:"Apenas profissionais podem configurar a aparência da clínica."})});const N=async a=>{a.preventDefault(),B(!0),w("");try{await Bo({primary_color:m.trim()||null,background_color:g.trim()||null,home_label:y.trim()||null,home_image_url:j.trim()||null,action_button_color:p.trim()||null,negation_button_color:R.trim()||null}),await n(),w("Aparência salva. A página já está com as novas cores.")}catch{w("Falha ao salvar.")}finally{B(!1)}};return s&&!r?e.jsx(H,{children:e.jsx(F,{color:"text.secondary",children:"Carregando..."})}):e.jsxs(H,{children:[e.jsx(F,{variant:"h1",sx:{mb:2},children:"Aparência"}),e.jsxs(K,{spacing:3,children:[e.jsx(to,{children:e.jsxs(ro,{children:[e.jsx(F,{variant:"h2",gutterBottom:!0,sx:{fontSize:"1.125rem"},children:"Tema do sistema"}),e.jsx(F,{color:"text.secondary",sx:{mb:2},children:"Modo claro/escuro, cor primária e densidade da interface. As alterações são salvas automaticamente."}),e.jsxs(K,{spacing:2,children:[e.jsxs(W,{component:"fieldset",children:[e.jsx(q,{component:"legend",children:"Modo"}),e.jsxs(ao,{row:!0,value:i.mode,onChange:(a,x)=>f(x),children:[e.jsx(T,{value:"light",control:e.jsx(U,{}),label:"Claro"}),e.jsx(T,{value:"dark",control:e.jsx(U,{}),label:"Escuro"}),e.jsx(T,{value:"system",control:e.jsx(U,{}),label:"Sistema"})]})]}),e.jsxs(W,{component:"fieldset",children:[e.jsx(q,{component:"legend",children:"Cor primária"}),e.jsx(Fo,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:.5},children:Object.entries(u).map(([a,x])=>e.jsx(eo,{variant:i.primaryColorKey===a?"contained":"outlined",size:"small",onClick:()=>d(a),sx:{minWidth:0,bgcolor:i.primaryColorKey===a?void 0:x.main,borderColor:x.main,"&:hover":{borderColor:x.main,bgcolor:i.primaryColorKey===a?void 0:x.light??x.main}},children:a},a))})]}),e.jsxs(W,{component:"fieldset",children:[e.jsx(q,{component:"legend",children:"Densidade"}),e.jsxs(ao,{row:!0,value:i.density,onChange:(a,x)=>l(x),children:[e.jsx(T,{value:"comfortable",control:e.jsx(U,{}),label:"Confortável"}),e.jsx(T,{value:"compact",control:e.jsx(U,{}),label:"Compacto"})]})]})]})]})}),e.jsx(to,{children:e.jsxs(ro,{children:[e.jsx(F,{variant:"h2",gutterBottom:!0,sx:{fontSize:"1.125rem"},children:"White label (clínica)"}),e.jsx(F,{color:"text.secondary",sx:{mb:2},children:"Personalize as cores e o botão Home para que o sistema tenha a cara da sua clínica."}),e.jsx("form",{onSubmit:N,children:e.jsxs(K,{spacing:2,sx:{maxWidth:420},children:[e.jsx(I,{label:"Cor principal (cabeçalho e botões)",value:m||"#1a1a2e",onChange:a=>h(a.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx("input",{type:"color",value:m||"#1a1a2e",onChange:a=>h(a.target.value),style:{width:28,height:28,border:"none",borderRadius:4,cursor:"pointer",padding:0}})})}}),e.jsx(I,{label:"Cor de fundo da área logada",value:g||"#ffffff",onChange:a=>v(a.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx("input",{type:"color",value:g||"#ffffff",onChange:a=>v(a.target.value),style:{width:28,height:28,border:"none",borderRadius:4,cursor:"pointer",padding:0}})})}}),e.jsx(I,{label:"Texto do botão Home",value:y,onChange:a=>b(a.target.value),placeholder:"Ex.: Minha Clínica",fullWidth:!0}),e.jsx(I,{label:"URL da imagem/logo do botão Home (opcional)",value:j,onChange:a=>S(a.target.value),placeholder:"https://...",fullWidth:!0}),e.jsx(I,{label:"Cor dos botões de ação",value:p||"#16a34a",onChange:a=>C(a.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx("input",{type:"color",value:p||"#16a34a",onChange:a=>C(a.target.value),style:{width:28,height:28,border:"none",borderRadius:4,cursor:"pointer",padding:0}})})}}),e.jsx(I,{label:"Cor dos botões de negação",value:R||"#dc2626",onChange:a=>P(a.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx("input",{type:"color",value:R||"#dc2626",onChange:a=>P(a.target.value),style:{width:28,height:28,border:"none",borderRadius:4,cursor:"pointer",padding:0}})})}}),A&&e.jsx(_o,{severity:A.includes("Falha")?"error":"success",onClose:()=>w(""),children:A}),e.jsx(eo,{type:"submit",variant:"contained",disabled:k,children:k?"Salvando...":"Salvar aparência da clínica"})]})})]})})]})]})}export{je as Appearance};
