import{a6 as h,r as s,j as e,B as r,T as n,P as d}from"./index-DJlnvih6.js";const f="".replace(/\/$/,"");function u(){const{token:o}=h(),[t,l]=s.useState(null),[i,a]=s.useState("");if(s.useEffect(()=>{if(!o){a("Token não informado.");return}fetch(`${f}/api/contracts/verify/${o}`).then(c=>{if(!c.ok)throw new Error("Não encontrado.");return c.json()}).then(l).catch(()=>a("Contrato não encontrado ou token inválido."))},[o]),i)return e.jsx(r,{sx:{minHeight:"100vh",p:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(n,{color:"error",sx:{fontSize:"1.1rem"},children:i})});if(!t)return e.jsx(r,{sx:{minHeight:"100vh",p:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(n,{color:"text.secondary",children:"Verificando..."})});const x=t.signed_at?new Date(t.signed_at).toLocaleString("pt-BR"):"";return e.jsx(r,{sx:{minHeight:"100vh",width:"100%",boxSizing:"border-box",bgcolor:"grey.50",py:2,px:1.5},children:e.jsxs(r,{sx:{maxWidth:900,mx:"auto"},children:[e.jsxs(d,{variant:"outlined",sx:{p:2,mb:2},children:[e.jsx(n,{variant:"h5",sx:{mb:1},children:"Verificação de contrato"}),e.jsxs(n,{children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Assinado em:"})," ",x]}),t.pdf_sha256&&e.jsxs(n,{sx:{wordBreak:"break-all",fontSize:14,mt:.5},children:[e.jsx("strong",{children:"SHA-256 do PDF:"})," ",t.pdf_sha256]}),e.jsx(n,{sx:{mt:1,color:"text.secondary",fontSize:14},children:"Este documento foi assinado eletronicamente. A autenticidade pode ser verificada pelo hash acima."})]}),t.body_html&&e.jsxs(r,{sx:{mt:2},children:[e.jsx(n,{variant:"h6",sx:{mb:1},children:"Preview do contrato"}),e.jsx(d,{variant:"outlined",className:"verify-contract-body",sx:{p:2.5,minHeight:400,overflow:"auto"},dangerouslySetInnerHTML:{__html:t.body_html}})]})]})})}export{u as VerifyContract};
