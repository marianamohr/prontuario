import{r as t,aQ as D,j as a,T as n,P as T,B as _,V as A,aR as N}from"./index-DJlnvih6.js";import{P as F}from"./PageContainer-DrcGApUY.js";import{A as C}from"./Alert-CVqmUb3o.js";import{T as r}from"./TextField-CttgYVuf.js";import{F as R,I as W,S as B}from"./Select-cu5oWY5i.js";import{B as L}from"./Button-6qkZ5rwi.js";const M=[{value:"",label:"Selecione"},{value:"SOLTEIRO",label:"Solteiro(a)"},{value:"CASADO",label:"Casado(a)"},{value:"DIVORCIADO",label:"Divorciado(a)"},{value:"VIUVO",label:"Viúvo(a)"},{value:"OUTRO",label:"Outro"}];function Q(){const[O,u]=t.useState(!0),[d,c]=t.useState(!1),[m,l]=t.useState(""),[v,s]=t.useState(""),[P,E]=t.useState(""),[i,h]=t.useState(""),[f,x]=t.useState(""),[p,S]=t.useState(""),[b,g]=t.useState(""),[j,y]=t.useState(""),o=t.useCallback(()=>{u(!0),l(""),s(""),D().then(e=>{E(e.email??""),h(e.full_name??""),x(e.trade_name??""),S(e.birth_date??""),g(e.address??""),y(e.marital_status??"")}).catch(()=>l("Falha ao carregar seu perfil.")).finally(()=>u(!1))},[]);t.useEffect(()=>{o()},[o]);const I=async e=>{if(e.preventDefault(),l(""),s(""),!i.trim()){l("Nome completo é obrigatório.");return}c(!0);try{await N({full_name:i.trim(),trade_name:f.trim()||void 0,birth_date:p.trim()||void 0,address:b||void 0,marital_status:j||void 0}),s("Perfil atualizado."),o()}catch{l("Falha ao atualizar perfil.")}finally{c(!1)}};return a.jsxs(F,{children:[a.jsx(n,{variant:"h4",sx:{mb:2},children:"Editar perfil"}),a.jsx(T,{variant:"outlined",sx:{p:2,maxWidth:560},children:O?a.jsx(n,{color:"text.secondary",children:"Carregando..."}):a.jsxs(_,{component:"form",onSubmit:I,sx:{display:"flex",flexDirection:"column",gap:1.5},children:[m&&a.jsx(C,{severity:"error",children:m}),v&&a.jsx(C,{severity:"success",children:v}),a.jsx(r,{label:"E-mail",value:P,InputProps:{readOnly:!0},fullWidth:!0}),a.jsx(r,{label:"Nome completo",value:i,onChange:e=>h(e.target.value),required:!0,fullWidth:!0}),a.jsx(r,{label:"Nome fantasia",value:f,onChange:e=>x(e.target.value),fullWidth:!0}),a.jsx(r,{label:"Data de nascimento",type:"date",value:p,onChange:e=>S(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0}),a.jsx(r,{label:"Endereço",value:b,onChange:e=>g(e.target.value),multiline:!0,minRows:2,fullWidth:!0}),a.jsxs(R,{fullWidth:!0,children:[a.jsx(W,{children:"Estado civil"}),a.jsx(B,{value:j,label:"Estado civil",onChange:e=>y(String(e.target.value)),children:M.map(e=>a.jsx(A,{value:e.value,children:e.label},e.value))})]}),a.jsx(L,{type:"submit",variant:"contained",disabled:d,sx:{alignSelf:"flex-start"},children:d?"Salvando...":"Salvar"}),a.jsx(n,{variant:"body2",color:"text.secondary",children:"CPF e e-mail não podem ser alterados por aqui."})]})})]})}export{Q as Profile};
