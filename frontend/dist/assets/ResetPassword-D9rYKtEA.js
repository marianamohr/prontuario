import{e as y,r,j as e,B as o,T as s,L as x,P as w,g as P}from"./index-DJlnvih6.js";import{T as i}from"./TextField-CttgYVuf.js";import{B as k}from"./Button-6qkZ5rwi.js";import"./Select-cu5oWY5i.js";function L(){const[m]=y(),p=m.get("token")||"",[l,f]=r.useState(p),[a,g]=r.useState(""),[u,j]=r.useState(""),[v,b]=r.useState(!1),[d,n]=r.useState(""),[c,h]=r.useState(!1),S=async t=>{if(t.preventDefault(),a!==u){n("As senhas não coincidem.");return}if(a.length<8){n("Senha deve ter no mínimo 8 caracteres.");return}n(""),h(!0);try{await P(l,a),b(!0)}catch{n("Token inválido ou expirado.")}finally{h(!1)}};return v?e.jsxs(o,{sx:{maxWidth:400,mx:"auto",p:2},children:[e.jsx(s,{children:"Senha alterada com sucesso."}),e.jsx(s,{sx:{mt:2},children:e.jsx(x,{to:"/login",style:{color:"inherit"},children:"Fazer login"})})]}):e.jsx(o,{sx:{maxWidth:400,mx:"auto",p:2},children:e.jsxs(w,{variant:"outlined",sx:{p:2},children:[e.jsx(s,{variant:"h5",sx:{mb:2},children:"Redefinir senha"}),e.jsxs(o,{component:"form",onSubmit:S,children:[e.jsx(i,{label:"Token",fullWidth:!0,required:!0,value:l,onChange:t=>f(t.target.value),sx:{mb:2}}),e.jsx(i,{label:"Nova senha",type:"password",fullWidth:!0,required:!0,inputProps:{minLength:8},value:a,onChange:t=>g(t.target.value),sx:{mb:2}}),e.jsx(i,{label:"Confirmar senha",type:"password",fullWidth:!0,required:!0,value:u,onChange:t=>j(t.target.value),sx:{mb:2}}),d&&e.jsx(s,{color:"error",sx:{mb:2,fontSize:14},children:d}),e.jsx(k,{type:"submit",variant:"contained",fullWidth:!0,disabled:c,sx:{py:.75},children:c?"Alterando...":"Alterar senha"})]}),e.jsx(s,{sx:{mt:2},children:e.jsx(x,{to:"/login",style:{color:"inherit"},children:"Voltar ao login"})})]})})}export{L as ResetPassword};
