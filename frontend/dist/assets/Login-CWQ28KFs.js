import{r as a,u as j,c as S,j as e,B as x,P as v,T as o,L as y,d as w}from"./index-DJlnvih6.js";import{T as f}from"./TextField-CttgYVuf.js";import{B as P}from"./Button-6qkZ5rwi.js";import"./Select-cu5oWY5i.js";function W(){const[i,h]=a.useState(""),[l,g]=a.useState(""),[u,c]=a.useState(""),[d,m]=a.useState(!1),{user:n,login:E}=j(),r=S();a.useEffect(()=>{n&&(n.role==="SUPER_ADMIN"?r("/backoffice/audit",{replace:!0}):r("/patients",{replace:!0}))},[n,r]);const b=async s=>{s.preventDefault(),c(""),m(!0);try{const t=await w(i,l);E(t.token,t.user),t.user.role==="SUPER_ADMIN"?r("/backoffice/audit",{replace:!0}):r("/patients",{replace:!0})}catch(t){const p=t instanceof Error?t.message:"Falha no login";c(p.includes("credentials")?"E-mail ou senha incorretos.":p)}finally{m(!1)}};return e.jsx(x,{sx:{maxWidth:400,mx:"auto",p:2},children:e.jsxs(v,{variant:"outlined",sx:{p:2},children:[e.jsx(o,{variant:"h5",sx:{mb:2},children:"Entrar"}),e.jsxs(x,{component:"form",onSubmit:b,children:[e.jsx(f,{label:"E-mail",type:"email",fullWidth:!0,required:!0,value:i,onChange:s=>h(s.target.value),sx:{mb:2}}),e.jsx(f,{label:"Senha",type:"password",fullWidth:!0,required:!0,value:l,onChange:s=>g(s.target.value),sx:{mb:2}}),u&&e.jsx(o,{color:"error",sx:{mb:2,fontSize:14},children:u}),e.jsx(P,{type:"submit",variant:"contained",fullWidth:!0,disabled:d,sx:{py:.75},children:d?"Entrando...":"Entrar"})]}),e.jsx(o,{sx:{mt:2,fontSize:14},children:e.jsx(y,{to:"/forgot-password",style:{color:"inherit"},children:"Esqueci minha senha"})})]})})}export{W as Login};
